"use strict";(function(w){w.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(callback,thisArg){thisArg=thisArg||w;for(var i=0;i<this.length;i++)callback.call(thisArg,this[i],i,this)})})(window);
'use strict';/**!
* Responsively Lazy
* http://ivopetkov.com/b/lazy-load-responsive-images/
* 
* @license
* Copyright 2015-2017, Ivo Petkov Free to use under the MIT license.
*/(function(w,d){w.responsivelyLazyConfig=w.responsivelyLazyConfig||{},w.responsivelyLazy=w.responsivelyLazy||function(config){function evalScripts(scripts,startIndex){for(var _loop=function(i){var breakAfterThisScript=!1,script=scripts[i],evScript=d.createElement('script'),type=script.getAttribute('type');if(null!==type&&evScript.setAttribute('type',type),src=script.getAttribute('src'),null!==src&&(evScript.setAttribute('src',src),(void 0===script.async||!1===script.async)&&i+1<scripts.length&&(breakAfterThisScript=!0,evScript.addEventListener('load',function(){evalScripts(scripts,i+1)}))),evScript.innerHTML=script.innerHTML,script.parentNode.replaceChild(evScript,script),breakAfterThisScript)return'break'},i=startIndex;i<scripts.length;i++){var src,_ret=_loop(i);if('break'===_ret)break}}function isWebPImage(candidate){return-1!==candidate.indexOf('.webp',candidate.length-5)}function updateImage(container,element){var options=(element.getAttribute('data-srcset')||'').trim().split(',').map(function(item){if(item=item.trim(),0===item.length)return!1;var optionImage=item,optionWidth=999998,spaceIndex=item.lastIndexOf(' ');return-1!==spaceIndex&&(optionImage=item.substr(0,spaceIndex),optionWidth=parseInt(item.substr(spaceIndex+1,item.length-spaceIndex-2),10)),(!isWebPImage(optionImage)||hasWebPSupport)&&[optionImage,optionWidth]}).filter(function(item){return Array.isArray(item)});options.sort(function(a,b){return a[1]===b[1]?isWebPImage(b[0])?1:isWebPImage(a[0])?-1:0:a[1]<b[1]?-1:1});var containerWidth=container.getBoundingClientRect().width*(void 0===window.devicePixelRatio?1:window.devicePixelRatio),bestSelectedOption=null,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,optionData,_iterator=options[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)if(optionData=_step.value,optionData[1]>=containerWidth){bestSelectedOption=optionData;break}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if(null===bestSelectedOption&&(bestSelectedOption=[element.getAttribute('src'),999999]),void 0===container.responsivelyLazyLastSetOption&&(container.responsivelyLazyLastSetOption=['',0]),container.responsivelyLazyLastSetOption[1]<bestSelectedOption[1]){container.responsivelyLazyLastSetOption=bestSelectedOption;var url=bestSelectedOption[0];if(void 0===container.responsivelyLazyEventsAttached&&(container.responsivelyLazyEventsAttached=!0,element.addEventListener('load',function(){var handler=container.getAttribute('data-onlazyload');null!==handler&&new Function(handler).bind(container)()},!1),element.addEventListener('error',function(){container.responsivelyLazyLastSetOption=['',0]},!1)),url===element.getAttribute('src'))return void element.removeAttribute('srcset');element.setAttribute('srcset',url)}}function updateElement(element){if(-1===doneElements.indexOf(element)){var lazyContent=element.getAttribute('data-lazycontent');if(null!==lazyContent){doneElements.push(element),mutationObserverIsDisabled=!0,element.innerHTML=lazyContent;var scripts=element.querySelectorAll('script');return 0<scripts.length&&evalScripts(scripts,0),void(mutationObserverIsDisabled=!1)}if(hasSrcSetSupport){if('img'===element.tagName.toLowerCase())return void updateImage(element,element);var imageElement=element.querySelector('img');null!==imageElement&&updateImage(element,imageElement)}}}var hasWebPSupport=!1,hasSrcSetSupport=!1,mutationObserverIsDisabled=!1,doneElements=[];if(function(){var polyFillsNeeded=[];if(void 0===MutationObserver&&polyFillsNeeded.push('MutationObserver'),void 0===IntersectionObserver&&polyFillsNeeded.push('IntersectionObserver'),polyFillsNeeded.length){var polyFillRequest=d.createElement('script');polyFillRequest.async=1,polyFillRequest.src='https://polyfill.io/v2/polyfill.min.js?features='+polyFillsNeeded.join('.');var firstScript=d.getElementsByTagName('script')[0];firstScript.parentNode.insertBefore(polyFillRequest,firstScript)}}(),void 0!==window.addEventListener&&void 0!==d.querySelectorAll){var image=new Image;return image.src='data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEADMDOJaQAA3AA/uuuAAA=',image.onload=image.onerror=function(){function updateIntersectionObservers(){d.querySelectorAll('.responsively-lazy').forEach(function(element){element.responsivelyLazyObserverAttached||(element.responsivelyLazyObserverAttached=!0,intersectionObserver.observe(element))})}function initialize(){updateIntersectionObservers();var observer=new MutationObserver(function(){mutationObserverIsDisabled||updateIntersectionObservers()});observer.observe(d.querySelector('body'),{childList:!0,subtree:!0})}w.responsivelyLazy.hasWebPSupport=hasWebPSupport=2===image.width,w.responsivelyLazy.hasSrcSetSupport=hasSrcSetSupport='srcset'in d.createElement('img'),config=Object.assign({},config),config.root&&!config.root.nodeType&&(config.root=d.querySelector(config.root));var intersectionObserver=new IntersectionObserver(function(entries){entries.forEach(function(entry){0<entry.intersectionRatio&&updateElement(entry.target)})},config);return config.hasOwnProperty('POLL_INTERVAL')&&(intersectionObserver.POLL_INTERVAL=config.POLL_INTERVAL),config.hasOwnProperty('USE_MUTATION_OBSERVER')&&(intersectionObserver.USE_MUTATION_OBSERVER=config.USE_MUTATION_OBSERVER),'loading'===d.readyState?void d.addEventListener('DOMContentLoaded',initialize):void initialize()},{hasWebPSupport:hasWebPSupport,hasSrcSetSupport:hasSrcSetSupport,doneElements:doneElements,config:Object.apply({},w.responsivelyLazyConfig)}}}(w.responsivelyLazyConfig)})(window,window.document);
