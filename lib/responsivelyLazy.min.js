'use strict';/**!
 * Responsively Lazy
 * http://ivopetkov.com/b/lazy-load-responsive-images/
 * 
 * @license
 * Copyright 2015-2017, Ivo Petkov Free to use under the MIT license.
 */var responsivelyLazy='undefined'==typeof responsivelyLazy?function(){var a=!1,b=!1,c=null,d=null,e='undefined'!=typeof IntersectionObserver,f=!1,g=[],h=function(a){if(null===c)return!1;var b=a.getBoundingClientRect(),e=b.top,f=b.left,g=b.width,h=b.height;return e<d&&0<e+h&&f<c&&0<f+g},j=function(a,b){for(var c=a.length,d=b;d<c;d++){var e=!1,f=a[d],g=document.createElement('script'),h=f.getAttribute('type');null!==h&&g.setAttribute('type',h);var k=f.getAttribute('src');if(null!==k&&(g.setAttribute('src',k),('undefined'==typeof f.async||!1===f.async)&&d+1<c&&(e=!0,g.addEventListener('load',function(){j(a,d+1)}))),g.innerHTML=f.innerHTML,f.parentNode.insertBefore(g,f),f.parentNode.removeChild(f),e)break}},i=function(b,c){var d=c.getAttribute('data-srcset');if(null===d)d=[];else if(d=d.trim(),0<d.length){d=d.split(',');for(var e,f=[],g=d.length,h=0;h<g;h++)if(e=d[h].trim(),0!==e.length){var i=e.lastIndexOf(' ');if(-1===i)var k=e,l=999998;else var k=e.substr(0,i),l=parseInt(e.substr(i+1,e.length-i-2),10);var m=!1;-1===k.indexOf('.webp',k.length-5)?m=!0:a&&(m=!0),m&&f.push([k,l])}f.sort(function(c,a){if(c[1]<a[1])return-1;if(c[1]>a[1])return 1;if(c[1]===a[1]){if(-1!==a[0].indexOf('.webp',a[0].length-5))return 1;if(-1!==c[0].indexOf('.webp',c[0].length-5))return-1}return 0}),d=f}else d=[];for(var n,o=b.offsetWidth*('undefined'==typeof window.devicePixelRatio?1:window.devicePixelRatio),p=null,g=d.length,h=0;h<g;h++)if(n=d[h],n[1]>=o){p=n;break}if(null===p&&(p=[c.getAttribute('src'),999999]),'undefined'==typeof b.responsivelyLazyLastSetOption&&(b.responsivelyLazyLastSetOption=['',0]),b.responsivelyLazyLastSetOption[1]<p[1]){b.responsivelyLazyLastSetOption=p;var q=p[0];'undefined'==typeof b.responsivelyLazyEventsAttached&&(b.responsivelyLazyEventsAttached=!0,c.addEventListener('load',function(){var a=b.getAttribute('data-onlazyload');null!==a&&new Function(a).bind(b)()},!1),c.addEventListener('error',function(){b.responsivelyLazyLastSetOption=['',0]},!1)),q===c.getAttribute('src')?c.removeAttribute('srcset'):c.setAttribute('srcset',q)}},k=function(){c=window.innerWidth,d=window.innerHeight},l=function(a){if(-1===g.indexOf(a)&&h(a)){var c=a.getAttribute('data-lazycontent');if(null!==c){g.push(a),f=!0,a.innerHTML=c;var d=a.querySelectorAll('script');return 0<d.length&&j(d,0),void(f=!1)}if(b){if('img'===a.tagName.toLowerCase())return void i(a,a);var e=a.querySelector('img');if(null!==e)return void i(a,e)}}},m=function(){for(var a=document.querySelectorAll('.responsively-lazy'),b=a.length,c=0;c<b;c++)l(a[c])};// elements that should never be updated again
if('undefined'!=typeof window.addEventListener&&'undefined'!=typeof document.querySelectorAll){k();var n=new Image;n.src='data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEADMDOJaQAA3AA/uuuAAA=',n.onload=n.onerror=function(){a=2===n.width,b='srcset'in document.createElement('img');var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)},d=!0,g=function(){d&&(d=!1,m()),c.call(null,g)};if(g(),e)var h=function(){for(var a,b=document.querySelectorAll('.responsively-lazy'),c=b.length,d=0;d<c;d++)a=b[d],'undefined'==typeof a.responsivelyLazyObserverAttached&&(a.responsivelyLazyObserverAttached=!0,j.observe(a))},j=new IntersectionObserver(function(a){for(var b in a){var c=a[b];0<c.intersectionRatio&&l(c.target)}}),i=null;var o=function(){e?(window.clearTimeout(i),i=window.setTimeout(function(){d=!0},300)):d=!0},p=function(){for(var a,b=document.querySelectorAll('.responsively-lazy'),c=b.length,d=0;d<c;d++)for(a=b[d].parentNode;a&&'html'!==a.tagName.toLowerCase();)'undefined'==typeof a.responsivelyLazyScrollAttached&&(a.responsivelyLazyScrollAttached=!0,a.addEventListener('scroll',o)),a=a.parentNode},q=function(){if(window.addEventListener('resize',function(){k(),o()}),window.addEventListener('scroll',o),window.addEventListener('load',o),e&&h(),p(),'undefined'!=typeof MutationObserver){var a=new MutationObserver(function(){f||(e&&h(),p(),o())});a.observe(document.querySelector('body'),{childList:!0,subtree:!0})}};'loading'===document.readyState?document.addEventListener('DOMContentLoaded',q):q()}}return{run:m,isVisible:h}}():responsivelyLazy;
